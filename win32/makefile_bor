# Make file for SciTE on Windows Borland C++ Builder version
# Copyright 1998-2000 by Neil Hodgson <neilh@scintilla.org>
# The License.txt file describes the conditions under which this software may be distributed.
# This makefile is for using Borland C++ and Borland make. 
# I test with Borland C++ Builder 3
# The main makefile uses mingw32 gcc and may be more current than this file.

CC = bcc32
RC = brcc32
LD = ilink32

PROG	= ..\bin\SciTE.exe
PROGSTATIC = ..\bin\Sc1.exe

LDFLAGS = import32 cw32mt
INCLUDEDIRS=-I../../scintilla/include -I../../scintilla/win32 -I../src 
CXXFLAGS = -P -tWM -w -RT- -x- -v

.cxx.obj:
	$(CC) $(INCLUDEDIRS) $(CXXFLAGS) -o$@ -c $*.cxx

.rc.res:
	$(RC) $(INCLUDEDIRS) $*.rc
	
DLLS=..\bin\Scintilla.dll ..\bin\SciLexer.dll

ALL:	$(PROG) $(PROGSTATIC) $(DLLS) ..\bin\SciTEGlobal.properties

clean:
	del /q *.exe *.o *.obj *.dll *.res *.map

..\bin\Scintilla.dll:	..\..\scintilla\bin\Scintilla.dll
	copy ..\..\scintilla\bin\Scintilla.dll ..\bin

..\bin\SciLexer.dll:	..\..\scintilla\bin\SciLexer.dll
	copy ..\..\scintilla\bin\SciLexer.dll ..\bin
	
..\bin\SciTEGlobal.properties:	..\src\SciTEGlobal.properties
	copy ..\src\SciTEGlobal.properties ..\bin

OBJS = SciTEBase.obj SciTEWin.obj \
	..\..\scintilla\win32\WindowAccessor.obj \
	..\..\scintilla\win32\PropSet.obj \
	..\..\scintilla\win32\PlatWin.obj \
	..\..\scintilla\win32\UniConversion.obj

$(PROG): $(OBJS) SciTERes.res
	$(LD) -Tpe -aa /c c0w32 $(OBJS), $(PROG), ,$(LDFLAGS), , SciTERes.res
	
OBJSSTATIC = Sc1.obj SciTEBase.obj \
	..\..\scintilla\win32\KeyWords.obj \
	..\..\scintilla\win32\LexCPP.obj \
	..\..\scintilla\win32\LexHTML.obj \
	..\..\scintilla\win32\LexLua.obj \
	..\..\scintilla\win32\LexOthers.obj \
	..\..\scintilla\win32\LexPerl.obj \
	..\..\scintilla\win32\LexPython.obj \
	..\..\scintilla\win32\LexSQL.obj \
	..\..\scintilla\win32\LexVB.obj \
	..\..\scintilla\win32\WindowAccessor.obj \
	..\..\scintilla\win32\DocumentAccessor.obj \
	..\..\scintilla\win32\PropSet.obj \
	..\..\scintilla\win32\ScintillaWinL.obj \
	..\..\scintilla\win32\ScintillaBaseL.obj \
	..\..\scintilla\win32\Editor.obj \
	..\..\scintilla\win32\Document.obj \
	..\..\scintilla\win32\CellBuffer.obj \
	..\..\scintilla\win32\ContractionState.obj \
	..\..\scintilla\win32\CallTip.obj \
	..\..\scintilla\win32\PlatWin.obj \
	..\..\scintilla\win32\UniConversion.obj \
	..\..\scintilla\win32\KeyMap.obj \
	..\..\scintilla\win32\Indicator.obj \
	..\..\scintilla\win32\LineMarker.obj \
	..\..\scintilla\win32\Style.obj \
	..\..\scintilla\win32\ViewStyle.obj \
	..\..\scintilla\win32\AutoComplete.obj

SciTEBase.obj: ..\src\SciTEBase.cxx ..\src\SciTEBase.h ..\src\SciTE.h \
	..\..\scintilla\include\Platform.h \
	..\..\scintilla\include\PropSet.h \
	..\..\scintilla\include\Accessor.h \
	..\..\scintilla\include\KeyWords.h \
	..\..\scintilla\include\Scintilla.h \
	..\..\scintilla\include\SciLexer.h
	$(CC) $(INCLUDEDIRS) $(CXXFLAGS) /c ..\src\SciTEBase.cxx /Fo$@
	
SciTEWin.obj: SciTEWin.cxx ..\src\SciTEBase.h ..\src\SciTE.h \
	..\..\scintilla\include\Platform.h \
	..\..\scintilla\include\PropSet.h \
	..\..\scintilla\include\Accessor.h \
	..\..\scintilla\include\KeyWords.h \
	..\..\scintilla\include\Scintilla.h \
	..\..\scintilla\include\SciLexer.h

Sc1.obj: SciTEWin.cxx ..\src\SciTEBase.h ..\src\SciTE.h \
	..\..\scintilla\include\Platform.h \
	..\..\scintilla\include\PropSet.h \
	..\..\scintilla\include\Accessor.h \
	..\..\scintilla\include\KeyWords.h \
	..\..\scintilla\include\Scintilla.h
	$(CC) $(INCLUDEDIRS) $(CXXFLAGS) -o$@ /DSTATIC_BUILD /c SciTEWin.cxx

Sc1Res.res:	SciTERes.rc ..\src\SciTE.h ..\..\scintilla\win32\PlatformRes.h
	$(RC) $(INCLUDEDIRS) -dSTATIC_BUILD -fo$@ SciTERes.rc
	
$(PROGSTATIC): $(OBJSSTATIC) Sc1Res.res
	$(LD) -Tpe -aa /c c0w32 $(OBJSSTATIC), $(PROGSTATIC), ,$(LDFLAGS), , Sc1Res.res
